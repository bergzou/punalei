{extend name="base" /}
{block name="content"}

<!-- 面包屑 -->

<div class="track global-crumbs">
    <div class="container">
        <a class="crumb" href="../../index.htm"><span class="iconfont icon-shouye"></span>首页</a> &nbsp; &gt; &nbsp; <a class="crumb" href="../../21.html">产品介绍</a><span class="separator">&gt;</span><a class="crumb" href="../../58.html">交直流电源系列</a><span class="separator">&gt;</span><a class="crumb" href="../../66.html">交流电源系列</a><span class="separator">&gt;</span><a class="crumb" href="../../116.html">交流变频电源</a><span class="separator">&gt;</span><a class="crumb" href="18.html">交流电源供应器 ANFH系列</a>  </div>
</div>




<!--内容-->

<div class="track prod-d-container">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-6">

                <div class="swiper swiper-container main-swiper">
                    <div class="swiper-wrapper">

                        {ld:pics value="$content['pics']"}
                        <div class="swiper-slide">
                            <img src="{$item}" alt="">
                        </div>
                        {/ld:pics}

                    </div>
                </div>
                <div class="thumbs-swiper-container">
                    <div class="main-swiper-button main-swiper-button-prev"></div>
                    <div class="main-swiper-button main-swiper-button-next"></div>
                    <div class="swiper swiper-container thumbs-swiper">
                        <div class="swiper-wrapper">

                            {ld:pics value="$content['pics']"}
                            <div class="swiper-slide">
                                <img src="{$item}" alt="">
                            </div>
                            {/ld:pics}

                        </div>
                    </div>
                </div>

            </div>
            <div class="col-12 col-md-6">
                <div class="pro-title">{$content.title}</div>
                <div class="pro-content">
                    <div class="tag-container">
                        <div class="tag-title">型号：</div>
                        <div class="tag-list">

                            <div class="tag">{$content.part}</div>


                        </div>
                    </div>
                    <div class="tag-container">
                        <div class="tag-title">应用：</div>
                        <div class="tag-list">

                            <div class="tag">{$content.apply}</div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 锚点 -->
<div class="track pro-d-anchor">
    <div class="container">
        <a href="#1" class="anchor-item">
            <i class="iconfont icon-chanpinguanli"></i>产品概述
        </a>
        <a href="#2" class="anchor-item">
            <i class="iconfont icon-yunyingguanli"></i>产品特点
        </a>
        <a href="#3" class="anchor-item">
            <i class="iconfont icon-yingyong"></i>产品应用
        </a>
        <a href="#4" class="anchor-item">
            <i class="iconfont icon-jishufuwu"></i>技术规格
        </a>
    </div>
</div>



<!-- 内容 -->
<div class="track container">
    <div class="pro-d-content">
        <div class="track content-item">
            <div class="item-title" id="1">
                <i class="iconfont icon-chanpinguanli"></i>产品概述
            </div>
            <div class="item-content">
                {$content.description}

            </div>
        </div>
        <div class="track content-item">
            <div class="item-title" id="2">
                <i class="iconfont icon-yunyingguanli"></i>产品特点
            </div>
            <div class="item-content">
                {$content.characters}
            </div>
        </div>
        <div class="track content-item">
            <div class="item-title" id="3">
                <i class="iconfont icon-yingyong"></i>产品应用
            </div>
            <div class="item-content">

                {$content.use}
            </div>
        </div>
        <div class="track content-item">
            <div class="item-title" id="4">
                <i class="iconfont icon-jishufuwu"></i>技术规格
            </div>
            <div class="item-content">

                {$content.spec}
            </div>
        </div>
    </div>
</div>

<!-- 资料 -->
<div class="track pro-d-datum">
    <div class="container">
        <div class="pro-d-title">
            <a href="#">相关资料</a>
        </div>
        <div class="row">


            {if condition="$content.handbook != '' "}
            <div class="col-12 col-md-6">
                <a href="{$content.handbook}" download="" class="datum-item">
                    <span>{$content.title}-用户手册</span>
                    <i class="iconfont icon-xiazai-wenjianxiazai-10"></i>
                </a>
            </div>
            {else/}
            {/if}

            {if condition="$content.agreement != '' "}
            <div class="col-12 col-md-6">
                <a href="{$content.agreement}" download="" class="datum-item">
                    <span>{$content.title}-通讯协议</span>
                    <i class="iconfont icon-xiazai-wenjianxiazai-10"></i>
                </a>
            </div>
            {else/}
            {/if}

            {if condition="$content.drive != '' "}
            <div class="col-12 col-md-6">
                <a href="{$content.drive}" download="" class="datum-item">
                    <span>{$content.title}-应用驱动软件</span>
                    <i class="iconfont icon-xiazai-wenjianxiazai-10"></i>
                </a>
            </div>
            {else/}
            {/if}

            {if condition="$content.resource != '' "}
            <div class="col-12 col-md-6">
                <a href="{$content.resource}" download="" class="datum-item">
                    <span>{$content.title}-应用产品资料</span>
                    <i class="iconfont icon-xiazai-wenjianxiazai-10"></i>
                </a>
            </div>
            {else/}
            {/if}


        </div>
    </div>
</div>

<!-- 相关产品 -->
<div class="track pro-d-related container">
    <div class="pro-d-title">
        <a href="../../21.html">相关产品</a>
    </div>
    <div class="row product-list">

        {ld:list ext="part"}
        <div class="col-6 col-md-4 col-lg-3">
            <a href="{$item.url}" class="product-item">
                <div class="item-title">{$item.title}</div>
                <div class="item-spec">{$item.part}</div>
                <div class="item-img-box">
                    <img class="item-img" src="{$item.image}" alt="">
                </div>
                <div class="item-learn-more">查看更多</div>
            </a>
        </div>
        {/ld:list}





    </div>
</div>


<script>
    $(function () {

        $('#addCart').click(function (event) {
            // 生成小球并添加到body
            const ball = $('<div class="ball"></div>')
            ball.css({
                left: event.clientX - 25,
                top: event.clientY - 25,
            })
            $(document.body).append(ball)

            // 获取购物车的位置
            const cartRect = document.querySelector('#cart').getBoundingClientRect()

            // 小球移动到购物车的位置
            ball.css({
                left: cartRect.left - 5,
                top: cartRect.top - 5,
                height: '14px',
                width: '14px',
                opacity: 1
            })

            // 小球移动到购物车的位置后，移除小球
            ball.on('transitionend', function (event) {
                if (event.originalEvent.propertyName === 'opacity') {
                    isadd()
                    ball.remove()
                }
            })

            let str = window.localStorage.getItem('goodsInfo');
            if (str !== null) {
                let arr = JSON.parse(str);
                let item = arr.find(item => item.model === '交流电源 ANFH系列')
                if (!!item) {
                    item.count++
                } else {
                    arr.push({
                        model: '交流电源 ANFH系列',
                        describe: '50/60Hz 300V 500VA-10kVA',
                        count: 1
                    })
                }
                window.localStorage.setItem('goodsInfo', JSON.stringify(arr))
            } else {
                let arr = []
                arr.push({
                    model: '交流电源 ANFH系列',
                    describe: '50/60Hz 300V 500VA-10kVA',
                    count: 1
                })
                window.localStorage.setItem('goodsInfo', JSON.stringify(arr))
            }
        })

        $('#addCarts').click(function (event) {
            // 生成小球并添加到body
            const ball = $('<div class="ball"></div>')
            ball.css({
                left: event.clientX - 25,
                top: event.clientY - 25,
            })
            $(document.body).append(ball)

            // 获取购物车的位置
            const cartRect = document.querySelector('#cart').getBoundingClientRect()

            // 小球移动到购物车的位置
            ball.css({
                left: cartRect.left - 5,
                top: cartRect.top - 5,
                height: '14px',
                width: '14px',
                opacity: 1
            })

            // 小球移动到购物车的位置后，移除小球
            ball.on('transitionend', function (event) {
                if (event.originalEvent.propertyName === 'opacity') {
                    isadd()
                    ball.remove()
                }
            })

            let str = window.localStorage.getItem('goodsInfo');
            if (str !== null) {
                let arr = JSON.parse(str);
                let item = arr.find(item => item.model === '交流电源 ANFH系列')
                if (!!item) {
                    item.count++
                } else {
                    arr.push({
                        model: '交流电源 ANFH系列',
                        describe: '50/60Hz 300V 500VA-10kVA',
                        count: 1
                    })
                }
                window.localStorage.setItem('goodsInfo', JSON.stringify(arr))
            } else {
                let arr = []
                arr.push({
                    model: '交流电源 ANFH系列',
                    describe: '50/60Hz 300V 500VA-10kVA',
                    count: 1
                })
                window.localStorage.setItem('goodsInfo', JSON.stringify(arr))
            }
        })

        var thumbsSwiper = new Swiper('.thumbs-swiper', {
            // loop: true,
            on:{
                tap: function(swiper,event) {
                    mainSwiper.slideTo(this.clickedIndex)
                },
            },
            breakpoints: {
                1920: {
                    slidesPerView: 2.5,
                    spaceBetween: 30,
                },
                992: {
                    slidesPerView: 2,
                    spaceBetween: 20,
                },
                768: {
                    slidesPerView: 2,
                    spaceBetween: 30,
                },
                576: {
                    slidesPerView: 2,
                    spaceBetween: 30,
                }
            }
        })

        var mainSwiper = new Swiper('.main-swiper', {
            // loop: true,
            spaceBetween: 30,
            navigation: {
                prevEl: '.main-swiper-button-prev',
                nextEl: '.main-swiper-button-next',
            },
            on: {
                slideChangeTransitionStart: function() {
                    thumbsSwiper.slideTo(this.realIndex)
                },
            },
            // thumbs: {
            //   swiper: thumbsSwiper
            // }
        })
        new Swiper('.product-list', {
            breakpoints: {
                1920: {
                    slidesPerView: 4,
                    spaceBetween: 30,
                },
                992: {
                    slidesPerView: 3,
                    spaceBetween: 20,
                },
                576: {
                    slidesPerView: 2,
                    spaceBetween: 15,
                }
            }
        })
    })

    function jump(url){
        window.location.href=url;
    }
    function isElementFullyObscured(element) {
        const elementRect = element.getBoundingClientRect();
        return elementRect.top < 0 ;
    }
    const myElement = $('.prod-d-container .row .pro-btn-container');
    if (isElementFullyObscured(myElement[0])) {
        $('.pro-btn-add-content').show();
    } else {
        $('.pro-btn-add-content').hide();
    }
    $(window).on('scroll', function() {
        const myElement = $('.prod-d-container .row .pro-btn-container');
        if (isElementFullyObscured(myElement[0])) {
            $('.pro-btn-add-content').show();
        } else {
            $('.pro-btn-add-content').hide();
        }
    });
</script>


{/block}